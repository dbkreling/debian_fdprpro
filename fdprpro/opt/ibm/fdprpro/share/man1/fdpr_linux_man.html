<?xml version="1.0" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>FDPR - Feedback-Directed Program Restructuring</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rev="made" href="mailto:rurban@x-ray.at" />
</head>

<body style="background-color: white">


<!-- INDEX BEGIN -->
<div name="index">
<p><a name="__index__"></a></p>

<ul>

	<li><a href="#name">Name</a></li>
	<li><a href="#synopsis">Synopsis</a></li>
	<li><a href="#description">Description</a></li>
	<li><a href="#fdpr_options"><strong>fdpr</strong> options</a></li>
	<li><a href="#input_files">Input files</a></li>
	<li><a href="#instrumentation_and_profiling">Instrumentation and profiling</a></li>
	<li><a href="#optimizations">Optimizations</a></li>
	<li><a href="#examples">Examples</a></li>
	<li><a href="#fdprpro_options"><strong>fdprpro</strong> options</a></li>
	<li><a href="#default_values_of_options">Default values of options</a></li>
	<li><a href="#ascii_profile">ASCII profile</a></li>
	<li><a href="#human_readable_output">Human-readable output</a></li>
	<li><a href="#importing_code_from_shared_libraries">Importing code from shared libraries</a></li>
	<li><a href="#limited_value_profiling__lvp_">Limited-Value Profiling (LVP)</a></li>
	<li><a href="#conservative_vs__aggressive_data_reordering">Conservative vs. aggressive data reordering</a></li>
	<li><a href="#runtime_instrumentation_stack">Runtime instrumentation stack</a></li>
	<li><a href="#alignment_strategies">Alignment strategies</a></li>
	<li><a href="#warnings_and_errors_during_profiling">Warnings and errors during profiling</a></li>
	<li><a href="#files">Files</a></li>
</ul>

<hr name="index" />
</div>
<!-- INDEX END -->

<p>
</p>
<h1><a name="name">Name</a></h1>
<p>FDPR - Feedback-Directed Post-link Optimization for Linux on POWER</p>
<p>
</p>
<hr />
<h1><a name="synopsis">Synopsis</a></h1>
<p><strong>fdpr</strong> 
[<strong>--instrument</strong> <em>file</em>]
[<strong>--train</strong> <em>workload</em> [<strong>--reset</strong>] ]
[<strong>--optimize</strong>]
[<strong>--log</strong> <em>file</em>]
[<strong>-f</strong>, <strong>--profile-file</strong> <em>file</em>]
[<strong>-o</strong>, <strong>--output-file</strong> <em>file</em>]
[<strong>-V</strong>, <strong>--version</strong>] 
[<strong>-v</strong>, <strong>--verbose</strong>]
[<strong>-h</strong>, <strong>--help</strong>] 
[<em>fdprpro-options</em>]
[--] <em>program</em></p>
<p><strong>fdprpro</strong> <strong>-a</strong> <em>action</em> [<em>fdprpro-options</em>] <em>program</em></p>
<p>
</p>
<hr />
<h1><a name="description">Description</a></h1>
<p>FDPR is a
performance-tuning utility for reducing the execution time
and the real-memory utilization of user-level application
programs. The tool optimizes the executable image of a program
by collecting information on the program's behavior under a typical workload 
and creating a new
version of the program optimized for that workload. The new
program generated by the post-link optimizer typically runs faster and uses less real
memory than the original program.</p>
<p><strong>Note</strong>: The post-link optimizer applies advanced optimization techniques to
programs. Some aggressive optimizations may result in programs that do not behave as expected.
It is recommended to test the optimized program, at least, with the same test suite used to 
test the original program.
The optimized program is not supported as input to the optimizer.</p>
<p>The post-link optimizer builds an optimized executable program in three distinct phases:</p>
<ul>
<li><strong><a name="instrumentation" class="item">Instrumentation (--instrument):</a></strong>

<p>Creates an instrumented executable program and an empty template profile file.</p>
</li>
<li><strong><a name="training" class="item">Training (--train):</a></strong>

<p>Runs the instrumented program and updates the profile data.</p>
</li>
<li><strong><a name="one_of_the_following_two_phases" class="item">One of the following two phases:</a></strong>

<ul>
<li><strong><a name="optimization" class="item">Optimization (--optimize):</a></strong>

<p>Generates the optimized executable program file, given optimization options.</p>
</li>
</ul>
</li>
</ul>
<p>See the corresponding options for further details.</p>
<p>The three-phase process can be achieved by using <strong>fdpr</strong> or
<strong>fdprpro</strong>.</p>
<p><strong>fdpr</strong> provides a convenient user interface, enabling the three
phases, or any legal combination thereof, to be performed in one command.</p>
<p>More experienced users may prefer to use <strong>fdprpro</strong>, which performs the actual
processing. <strong>fdprpro</strong> provides explicit control over the actual processing
and requires a separate activation to perform either the instrumentation or the
optimization phases. This is specified by the action option <strong>-a</strong>|<strong>--action</strong> <em>action</em>,
where the <em>action</em> term is &quot;instr&quot; to perform instrumentation or &quot;opt&quot; to perform optimization.</p>
<p><strong>Note</strong>: The instrumented executable, created in the instrumentation phase and run
in the training phase, typically runs several times slower than the
original program.  Due to the increased execution time
required by the instrumented program, the executable should be
invoked in such a way as to minimize execution duration, while
still fully exercising the required code areas.</p>
<p>
</p>
<hr />
<h1><a name="fdpr_options"><strong>fdpr</strong> options</a></h1>
<dl>
<dt><strong><a name="instrument_file" class="item"><strong>--instrument</strong> <em>[file]</em></a></strong></dt>

<dd>
<p>Creates an instrumented executable program with the specified
name (default <em>program</em>.instr).
Default: no instrumentation phase.</p>
</dd>
<dt><strong><a name="reset" class="item"><strong>--reset</strong></a></strong></dt>

<dd>
<p>Normally, each time the instrumented program runs, it accumulates
profile information in the profile file (see
<strong>--profile-file</strong>). Specifying this option causes the initial option
file, saved in <em>profile-name</em>.template, to be copied to the profile
file. This effectively resets the profile information to its empty
state. The option requires <strong>--train</strong> to be specified as well.</p>
</dd>
<dt><strong><a name="train_workload" class="item"><strong>--train</strong> <em>workload</em></a></strong></dt>

<dd>
<p>Runs the instrumented program and creates the profile
data. The workload is a script that accepts one parameter: the
executing program. <strong>fdpr</strong> invokes the script with the path to the
instrumented program. If instrumentation phase is not
specified, the instrumented program is assumed to be
<em>program</em>.instr.
Default: No profiling phase.</p>
</dd>
<dt><strong><a name="optimize" class="item"><strong>--optimize</strong></a></strong></dt>

<dd>
<p>Generates the optimized executable program file. Users can specify
optimizations explicitly by passing optimization
options to <strong>fdprpro</strong> (see <strong>fdprpro options</strong> below).  If no
<strong>fdprpro</strong> optimization option is specified, the <strong>fdprpro</strong> <strong>-O</strong> option is used.</p>
</dd>
<dt><strong><a name="o_output_file_output_output_file" class="item"><strong>-o</strong> <em>output_file</em>, <strong>--output</strong> <em>output_file</em></a></strong></dt>

<dd>
<p>The optimized output file.
The default is <em>program</em>.fdpr</p>
</dd>
<dt><strong><a name="f_profile_file_file" class="item"><strong>-f</strong>, <strong>--profile-file</strong> <em>file</em></a></strong></dt>

<dd>
<p>The profile file. This is used as an output file in the instrumentation phase and
as an input file in the optimization phase.
The default is <em>program</em>.nprof</p>
</dd>
<dt><strong><a name="v_version" class="item"><strong>-V</strong>, <strong>--version</strong></a></strong></dt>

<dd>
<p>Prints version information and exits.</p>
</dd>
<dt><strong><a name="v_verbose" class="item"><strong>-v</strong>, <strong>--verbose</strong></a></strong></dt>

<dd>
<p>Prints progress indication and statistical information during processing.</p>
</dd>
<dt><strong><a name="h_help" class="item"><strong>-h</strong>, <strong>--help</strong></a></strong></dt>

<dd>
<p>Prints usage information and exit.</p>
</dd>
</dl>
<p>The above options can be shortened to any unique sequence.</p>
<p>To disambiguate option parsing, separate the options from <em>program</em> by '--'.
For example, because the parameter to <strong>--instrument</strong> is optional, the following command is illegal:</p>
<pre>
  $ fdpr --instr myprog</pre>
<p>Instead, use the command:</p>
<pre>
  $ fdpr --instr -- myprog</pre>
<p>
</p>
<hr />
<h1><a name="input_files">Input files</a></h1>
<p>The input file to <strong>fdpr</strong> should be an ELF executable or shared
library (<code>.so</code> file). Both ELF32 and ELF64 are supported.</p>
<p><strong>Note</strong>: The executable program should be built with
relocation information. <strong>fdpr</strong> supports both the GCC and XLC
compilers and the GNU linker. To leave the relocation
information in the executable file, use the linker with
the <strong>--emit-relocs</strong> (or <strong>-q</strong>) option. This can be specified in the
GCC command by <strong>-Wl,-q</strong>.</p>
<p>
</p>
<hr />
<h1><a name="instrumentation_and_profiling">Instrumentation and profiling</a></h1>
<p>Along with the instrumented file, <strong>fdpr</strong> creates the profile
file. The file is then filled with profile information
(i.e., counts at various points in the program), while the
instrumented program runs with its specified workload.</p>
<p><strong>Note</strong>: The instrumented program requires a shared library
called <code>libfdprinst32.so</code> (or <code>libfdprinst64.so</code> for ELF64
programs). A proper installation from the RPM file ensures the libraries are found.
Alternatively, make sure the environment variable LD_LIBRARY_PATH
is set to the directory containing these libraries.</p>
<p>The instrumented program expects the profile file
to be in the same directory as the instrumented program.
To override this,
set the environment variable <strong>FDPR_PROF_DIR</strong> to the required directory. 
Having the profile file specified with its full pathname, either by the 
<strong>-f</strong><em>profile_file</em> or via <strong>FDPR_PROF_DIR</strong>, is important if the program changes
its directory during runtime or if it is executed from a different directory then
the one where it was built.</p>
<p>
</p>
<hr />
<h1><a name="optimizations">Optimizations</a></h1>
<p>By default, <strong>fdpr</strong> performs code
reordering optimization together with the optimizations of
branch prediction, branch folding, code alignment,
and removal of redundant NOOP instructions (see the <strong>fdprpro</strong> option <strong>-O</strong> below) .</p>
<p>Additional optimizations are available explicitly by indicating specific <strong>fdprpro</strong> options (see below).</p>
<p>
</p>
<hr />
<h1><a name="examples">Examples</a></h1>
<p>The following are typical usage examples of <strong>fdpr</strong>.</p>
<ol>
<li>
<p>In this simple example, <strong>fdpr</strong> performs all three
phases. Here, <code>myprog</code> is the input executable and
<code>test</code> is a shell script that invokes <code>myprog</code>.</p>
<pre>
        $ fdpr --instr --train test --opt myprog</pre>
<p>The <code>test</code> script should look something like this:</p>
<pre>
        # code to exercise myprog
        $1 arg1 arg2 ...</pre>
<p><strong>fdpr</strong> generates the instrumentation in <code>myprog.instr</code>, runs the
script <code>test</code>, performs the default optimizations,
and generates the output file in <code>myprog.fdpr</code>.</p>
</li>
<li>
<p>Perform specific optimizations, producing the output in <code>myprog.lro</code></p>
<pre>
        $ fdpr -opt --link-register-optimization -RC -o myprog.lro myprog</pre>
<p>This command performs only link-register optimization and code
reordering using the profile information in <code>myprog.nprof</code></p>
</li>
</ol>
<p>
</p>
<hr />
<h1><a name="fdprpro_options"><strong>fdprpro</strong> options</a></h1>
<p><strong>fdprpro</strong> accepts a host of optimization-specific options. In
addition, there are several options that create auxiliary files for
debugging purposes (e.g., code disassembly).</p>
<dl>
<dt><strong><a name="analysis_options" class="item"><strong>Analysis Options:</strong></a></strong></dt>

<dt><strong><a name="no_aawc_no_analyze_assembly_written_csects" class="item"><strong>-[no]aawc</strong>, <strong>--[no]analyze-assembly-written-csects</strong></a></strong></dt>

<dd>
<p>Analyze objects written in Assembly.</p>
</dd>
<dt><strong><a name="acf_analysis_configuration_file_analysis_configuration_file_analysis_configuration_file" class="item"><strong>-acf</strong> <em>analysis-configuration-file</em>, <strong>--analysis-configuration-file</strong> <em>analysis-configuration-file</em></a></strong></dt>

<dd>
<p>Provide a configuration file of analysis information (advanced option).</p>
</dd>
<dt><strong><a name="asd_analyze_static_data" class="item"><strong>-asd</strong>, <strong>--analyze-static-data</strong></a></strong></dt>

<dd>
<p>Analyze static data objects as distinct data elements for data reordering (unsafe for certain compilers).</p>
</dd>
<dt><strong><a name="esa_extra_safe_analysis" class="item"><strong>-esa</strong>, <strong>--extra-safe-analysis</strong></a></strong></dt>

<dd>
<p>Limit analysis phase to compiler generated code.</p>
</dd>
<dt><strong><a name="fca_funcsect_analysis" class="item"><strong>-fca</strong>, <strong>--funcsect-analysis</strong></a></strong></dt>

<dd>
<p>Apply special analysis for an input executable that was compiled with the <strong>-qfuncsect</strong> compiler option.</p>
</dd>
<dt><strong><a name="ff_string_file_format_string" class="item"><strong>-ff</strong> <em>string</em>, <strong>--file-format</strong> <em>string</em></a></strong></dt>

<dd>
<p>Input file format: can be LM (load module) or PO (program object).</p>
</dd>
<dt><strong><a name="ifl_file_ignored_function_list_file" class="item"><strong>-ifl</strong> <em>file</em>, <strong>--ignored-function-list</strong> <em>file</em></a></strong></dt>

<dd>
<p>Set the ignored function list. The file contains names of functions that considered as unsafe and thus are not modified.</p>
</dd>
<dt><strong><a name="iinf_ignore_info" class="item"><strong>-iinf</strong>, <strong>--ignore-info</strong></a></strong></dt>

<dd>
<p>Ignore .info sections produced with the <strong>-qfdpr</strong> option during compile time.</p>
</dd>
<dt><strong><a name="instrumentation_options" class="item"><strong>Instrumentation Options:</strong></a></strong></dt>

<dt><strong><a name="ei_embedded_instrumentation" class="item"><strong>-ei</strong>, <strong>--embedded-instrumentation</strong></a></strong></dt>

<dd>
<p>Perform embedded instrumentation. The profile will be collected into the application's global data area. When the application terminates, the collected data will be lost.</p>
</dd>
<dt><strong><a name="fd_fdesc_file_descriptor_fdesc" class="item"><strong>-fd</strong> <em>Fdesc</em>, <strong>--file-descriptor</strong> <em>Fdesc</em></a></strong></dt>

<dd>
<p>Set the file descriptor number to be used when opening the profile file. The default of <em>Fdesc</em> is set to the maximum-allowed number of open files.</p>
</dd>
<dt><strong><a name="icvp_instr_call_value_profiling" class="item"><strong>-icvp</strong>, <strong>--instr-call-value-profiling</strong></a></strong></dt>

<dd>
<p>instrument the values of parameters passed in function calles.</p>
</dd>
<dt><strong><a name="imullx_mullx_instrumentation" class="item"><strong>-imullX</strong>, <strong>--mullX-instrumentation</strong></a></strong></dt>

<dd>
<p>perform value profiling of RA and RB operands in mullX instructions.</p>
</dd>
<dt><strong><a name="no_iderat_no_derat_instrumentation" class="item"><strong>-[no]iderat</strong>, <strong>--[no]derat-instrumentation</strong></a></strong></dt>

<dd>
<p>Perform value profiling of RA and RB operands in load/store indexed instructions.</p>
</dd>
<dt><strong><a name="issu_instrumentation_safe_stack_usage" class="item"><strong>-issu</strong>, <strong>--instrumentation-safe-stack-usage</strong></a></strong></dt>

<dd>
<p>Ensure that additional stack space is properly allocated for the instrumented run. Use this option if your application uses the stack extensively (e.g., when the program uses alloca()). Note that this option adds extra overhead on instrumentation code.</p>
</dd>
<dt><strong><a name="iso_offset_instrumentation_stack_offset_offset" class="item"><strong>-iso</strong> <em>offset</em>, <strong>--instrumentation-stack-offset</strong> <em>offset</em></a></strong></dt>

<dd>
<p>Set the offset from the stack, a negative number, where the instrumentation's area for saving registers is kept at runtime. Use with care.</p>
</dd>
<dt><strong><a name="m_addr_profile_map_addr" class="item"><strong>-M</strong> <em>addr</em>, <strong>--profile-map</strong> <em>addr</em></a></strong></dt>

<dd>
<p>Set the shared memory segment address for profiling. Alternative shared memory addresses are needed when the instrumented program application creates a conflict with the shared-memory addresses preserved for the profiling. Typical alternative values are 0x40000000, 0x50000000, ... up to 0xC0000000. The default is set to 0x3000000.</p>
</dd>
<dt><strong><a name="ptm_profile_to_memory" class="item"><strong>-ptm</strong>, <strong>--profile-to-memory</strong></a></strong></dt>

<dd>
<p>Use shared memory key instead of file mapping to obtain a shared memory area for the profile data.</p>
</dd>
<dt><strong><a name="no_ri_no_register_instrumentation" class="item"><strong>-[no]ri</strong>, <strong>--[no]register-instrumentation</strong></a></strong></dt>

<dd>
<p>Instrument the input program file to collect profile information about indirect branches via registers. The default is set to collect the profile information.</p>
</dd>
<dt><strong><a name="no_sfp_no_save_floating_point_registers" class="item"><strong>-[no]sfp</strong>, <strong>--[no]save-floating-point-registers</strong></a></strong></dt>

<dd>
<p>Save the floating point registers in the instrumented code. The default is set to save floating point registers.</p>
</dd>
<dt><strong><a name="shmkey_key_number_shared_memory_key_key_number" class="item"><strong>-shmkey</strong> <em>key-number</em>, <strong>--shared-memory-key</strong> <em>key-number</em></a></strong></dt>

<dd>
<p>Specify a shared memory key to use when creating a shared memory area for the profile. The default key is created by hashing the profile file name (with ftok).</p>
</dd>
<dt><strong><a name="profile_files_options" class="item"><strong>Profile Files Options:</strong></a></strong></dt>

<dt><strong><a name="af_prof_file_ascii_profile_file_prof_file" class="item"><strong>-af</strong> <em>prof_file</em>, <strong>--ascii-profile-file</strong> <em>prof_file</em></a></strong></dt>

<dd>
<p>Set the name of a text format profile file containing profile information.</p>
</dd>
<dt><strong><a name="aop_accept_old_profile" class="item"><strong>-aop</strong>, <strong>--accept-old-profile</strong></a></strong></dt>

<dd>
<p>Accept the old profile file collected on previous versions of the input program file (requires the <strong>-f</strong> flag).</p>
</dd>
<dt><strong><a name="f_prof_file_profile_file_prof_file" class="item"><strong>-f</strong> <em>prof_file</em>, <strong>--profile-file</strong> <em>prof_file</em></a></strong></dt>

<dd>
<p>Set the profile file name. The profile file is created during the instrumentation phase and read during the optimization phase. The profile file is updated each time you run the instrumented program.</p>
</dd>
<dt><strong><a name="fdir_prof_file_dir_profile_file_directory_prof_file_dir" class="item"><strong>-fdir</strong> <em>prof_file_dir</em>, <strong>--profile-file-directory</strong> <em>prof_file_dir</em></a></strong></dt>

<dd>
<p>Set the run-time location of the profile file. The profile will be search during the profiling phase at this location. The default location is the path given in the profile file name (-f option). Applicable only at instrumentation phase.</p>
</dd>
<dt><strong><a name="optimization_options" class="item"><strong>Optimization Options:</strong></a></strong></dt>

<dt><strong><a name="a_alignment_align_code_alignment" class="item"><strong>-A</strong> <em>alignment</em>, <strong>--align-code</strong> <em>alignment</em></a></strong></dt>

<dd>
<p>Specify code alignment strategy. 1: Use grouping rules of target machine (default), 2: Same as 1 but consider also hotness of branch targets. See <strong>-m</strong> for the selected machine model.</p>
</dd>
<dt><strong><a name="abb_factor_align_basic_blocks_factor" class="item"><strong>-abb</strong> <em>factor</em>, <strong>--align-basic-blocks</strong> <em>factor</em></a></strong></dt>

<dd>
<p>Align basic blocks that are hotter than the average by a given (float) <em>factor</em>. This is a lower-level machine-specific alignment compared to <strong>--align-code</strong>. Value of <strong>-1</strong> (the default) disables this option.</p>
</dd>
<dt><strong><a name="bf_branch_folding" class="item"><strong>-bf</strong>, <strong>--branch-folding</strong></a></strong></dt>

<dd>
<p>Eliminate branch to branch instructions.</p>
</dd>
<dt><strong><a name="ccc_threshold_cold_code_connector_threshold" class="item"><strong>-ccc</strong> <em>threshold</em>, <strong>--cold-code-connector</strong> <em>threshold</em></a></strong></dt>

<dd>
<p>Preserves original order for code which is less frequently executed than given threshold.</p>
</dd>
<dt><strong><a name="bldcg_build_dcg" class="item"><strong>-bldcg</strong>, <strong>--build-dcg</strong></a></strong></dt>

<dd>
<p>Build a Data Connectivity Graph (DCG) for enhanced data reordering (applicable only with the <strong>-RD</strong> flag).</p>
</dd>
<dt><strong><a name="bp_branch_prediction" class="item"><strong>-bp</strong>, <strong>--branch-prediction</strong></a></strong></dt>

<dd>
<p>Set branch prediction bit for conditional branches according to the collected profile.</p>
</dd>
<dt><strong><a name="btcar_branch_table_csect_anchor_removal" class="item"><strong>-btcar</strong>, <strong>--branch-table-csect-anchor-removal</strong></a></strong></dt>

<dd>
<p>Eliminate load instructions used when accessing branch tables.</p>
</dd>
<dt><strong><a name="cbsi_chain_based_selective_inline" class="item"><strong>-cbsi</strong>, <strong>--chain-based-selective-inline</strong></a></strong></dt>

<dd>
<p>Perform selective inlining of functions that produce long hot chains of code.</p>
</dd>
<dt><strong><a name="cbtd_convert_bss_to_data" class="item"><strong>-cbtd</strong>, <strong>--convert-bss-to-data</strong></a></strong></dt>

<dd>
<p>Convert BSS section into a data section. This is useful for more aggressive tocload and RD optimizations.</p>
</dd>
<dt><strong><a name="crd_conservativerd" class="item"><strong>-cRD</strong>, <strong>--conservativeRD</strong></a></strong></dt>

<dd>
<p>Perform conservative static data reordering by packing together all frequently referenced static variables.</p>
</dd>
<dt><strong><a name="dce_dead_code_elimination" class="item"><strong>-dce</strong>, <strong>--dead-code-elimination</strong></a></strong></dt>

<dd>
<p>Eliminate instructions related to unused local variables within frequently executed functions. This is useful mainly after applying function inlining optimization.</p>
</dd>
<dt><strong><a name="dp_data_prefetch" class="item"><strong>-dp</strong>, <strong>--data-prefetch</strong></a></strong></dt>

<dd>
<p>Insert data-cache prefetch instructions to improve data-cache performance.</p>
</dd>
<dt><strong><a name="dpht_threshold_data_placement_hotness_threshold_threshold" class="item"><strong>-dpht</strong> <em>threshold</em>, <strong>--data-placement-hotness-threshold</strong> <em>threshold</em></a></strong></dt>

<dd>
<p>Set data placement algorithm hotness threshold between (0,1), where 0 reorders the static variables in large groups based on the control flow, and 1 reorders the variables in very small groups based on their access frequency. (This is applicable only with the <strong>-RD</strong> flag).</p>
</dd>
<dt><strong><a name="dpnf_factor_data_placement_normalization_factor_factor" class="item"><strong>-dpnf</strong> <em>factor</em>, <strong>--data-placement-normalization-factor</strong> <em>factor</em></a></strong></dt>

<dd>
<p>Set data placement algorithm normalization factor between (0,1), where 0 causes static variables to be reordered regardless of their size, and 1 locates only small sized variables first. (applicable only with the <strong>-RD</strong> flag).</p>
</dd>
<dt><strong><a name="ece_epilog_code_eliminate" class="item"><strong>-ece</strong>, <strong>--epilog-code-eliminate</strong></a></strong></dt>

<dd>
<p>Reduce code size by grouping common instructions in function epilogs, into a single unified code.</p>
</dd>
<dt><strong><a name="fatc_num_of_bytes_fat_const_num_of_bytes" class="item"><strong>-fatc</strong> <em>num_of_bytes</em>, <strong>--fat-const</strong> <em>num_of_bytes</em></a></strong></dt>

<dd>
<p>Inflate constant areas in code section by adding <em>num_of_bytes</em> (entire set to 255) to each constant area.</p>
</dd>
<dt><strong><a name="fatd_num_of_bytes_fat_data_num_of_bytes" class="item"><strong>-fatd</strong> <em>num_of_bytes</em>, <strong>--fat-data</strong> <em>num_of_bytes</em></a></strong></dt>

<dd>
<p>Inflate data section by adding <em>num_of_bytes</em> (entire set to 255) to each data basic unit.</p>
</dd>
<dt><strong><a name="fatn_num_of_nops_fat_nop_num_of_nops" class="item"><strong>-fatn</strong> <em>num_of_nops</em>, <strong>--fat-nop</strong> <em>num_of_nops</em></a></strong></dt>

<dd>
<p>Inflate code secion by adding <em>num_of_nop</em> to each code basic block.</p>
</dd>
<dt><strong><a name="bined_binary_editor_binary_editor_binary_editor" class="item"><strong>-bined</strong> <em>-binary_editor</em>, <strong>--binary-editor</strong> <em>-binary_editor</em></a></strong></dt>

<dd>
<p>Edit existing binary code (advanced option).</p>
</dd>
<dt><strong><a name="fc_function_cloning" class="item"><strong>-fc</strong>, <strong>--function-cloning</strong></a></strong></dt>

<dd>
<p>Enable function cloning phase only during function inlining optimizations (applicable only with function inlining flags: <strong>-i</strong>, <strong>-si</strong>, <strong>-ihf</strong>, <strong>-isf</strong>, <strong>-shci</strong>).</p>
</dd>
<dt><strong><a name="hr_hco_reschedule" class="item"><strong>-hr</strong>, <strong>--hco-reschedule</strong></a></strong></dt>

<dd>
<p>Relocate instructions from frequently executed code to rarely executed code areas, when possible.</p>
</dd>
<dt><strong><a name="hrf_factor_hco_resched_factor_factor" class="item"><strong>-hrf</strong> <em>factor</em>, <strong>--hco-resched-factor</strong> <em>factor</em></a></strong></dt>

<dd>
<p>Set the aggressiveness of the <strong>-hr</strong> optimization option according to a factor value between (0,1), where 0 is the least aggressive factor (applicable only with the <strong>-hr</strong> option).</p>
</dd>
<dt><strong><a name="tasr_toc_anchor_store_reschedule" class="item"><strong>-tasr</strong>, <strong>--toc-anchor-store-reschedule</strong></a></strong></dt>

<dd>
<p>Relocate TOC store instructions from frequently executed code to rarely executed code areas, when possible.</p>
</dd>
<dt><strong><a name="i_inline" class="item"><strong>-i</strong>, <strong>--inline</strong></a></strong></dt>

<dd>
<p>Same as <strong>--selective-inline</strong> with <strong>--inline-small-funcs</strong> 12.</p>
</dd>
<dt><strong><a name="ihf_pct_inline_hot_functions_pct" class="item"><strong>-ihf</strong> <em>pct</em>, <strong>--inline-hot-functions</strong> <em>pct</em></a></strong></dt>

<dd>
<p>Inline all function call sites to functions that have a frequency count greater than the given <em>pct</em> frequency percentage.</p>
</dd>
<dt><strong><a name="isf_size_inline_small_funcs_size" class="item"><strong>-isf</strong> <em>size</em>, <strong>--inline-small-funcs</strong> <em>size</em></a></strong></dt>

<dd>
<p>Inline all functions that are smaller than or equal to the given <em>size</em> in bytes.</p>
</dd>
<dt><strong><a name="kr_killed_registers" class="item"><strong>-kr</strong>, <strong>--killed-registers</strong></a></strong></dt>

<dd>
<p>Eliminate stores and restores of registers that are killed (overwritten) after frequently executed function calls.</p>
</dd>
<dt><strong><a name="lap_load_address_propagation" class="item"><strong>-lap</strong>, <strong>--load-address-propagation</strong></a></strong></dt>

<dd>
<p>Eliminate load instructions of variable addresses by re-using pre-loaded addresses of adjacent variables.</p>
</dd>
<dt><strong><a name="las_load_after_store" class="item"><strong>-las</strong>, <strong>--load-after-store</strong></a></strong></dt>

<dd>
<p>Add NOP instructions to place each load instruction further apart following a store instruction that references the same memory address.</p>
</dd>
<dt><strong><a name="plas_pattern_based_load_after_store" class="item"><strong>-plas</strong>, <strong>--pattern-based-load-after-store</strong></a></strong></dt>

<dd>
<p>Optimizes inefficient memory access patterns in order to avoid load-after-store events. .</p>
</dd>
<dt><strong><a name="ebplas_event_based_pattern_based_load_after_store" class="item"><strong>-ebplas</strong>, <strong>--event-based-pattern-based-load-after-store</strong></a></strong></dt>

<dd>
<p>Optimizes inefficient memory access patterns in order to avoid load-after-store events. The optimization is possible if PM_MRK_LSU_REJECT_LHS profile is available.</p>
</dd>
<dt><strong><a name="lro_link_register_optimization" class="item"><strong>-lro</strong>, <strong>--link-register-optimization</strong></a></strong></dt>

<dd>
<p>Eliminate saves and restores of the link register in frequently-executed functions.</p>
</dd>
<dt><strong><a name="lu_aggressiveness_factor_loop_unroll_aggressiveness_factor" class="item"><strong>-lu</strong> <em>aggressiveness_factor</em>, <strong>--loop-unroll</strong> <em>aggressiveness_factor</em></a></strong></dt>

<dd>
<p>Unroll short loops containing one to several basic blocks according to an aggressiveness factor between (1,9), where 1 is the least aggressive unrolling option for very hot and short loops.</p>
</dd>
<dt><strong><a name="lun_unrolling_number_loop_unrolling_number_unrolling_number" class="item"><strong>-lun</strong> <em>unrolling_number</em>, <strong>--loop-unrolling-number</strong> <em>unrolling_number</em></a></strong></dt>

<dd>
<p>Set the number of unrolled iterations in each unrolled loop. The allowed range is between (2,50). Default is set to 2. (Applicable only with the <strong>-lu</strong> flag).</p>
</dd>
<dt><strong><a name="lux_unrolling_factor_loop_unroll_extended_unrolling_factor" class="item"><strong>-lux</strong> <em>unrolling_factor</em>, <strong>--loop-unroll-extended</strong> <em>unrolling_factor</em></a></strong></dt>

<dd>
<p>Unroll hot loops using given unrolling factor. The allowed values are integer numbers that are power of 2. Value <strong>-1</strong> disables the optimization, value 1 calculates the unrolling factor automatically, given a machine model.</p>
</dd>
<dt><strong><a name="nop_nop_removal" class="item"><strong>-nop</strong>, <strong>--nop-removal</strong></a></strong></dt>

<dd>
<p>Remove NOP instructions from reordered code.</p>
</dd>
<dt><strong><a name="o" class="item"><strong>-O</strong></a></strong></dt>

<dd>
<p>Switch on basic optimizations only. Same as <strong>-RC</strong> <strong>-nop</strong> <strong>-bp</strong> <strong>-bf</strong>.</p>
</dd>
<dt><strong><a name="o2" class="item"><strong>-O2</strong></a></strong></dt>

<dd>
<p>Switch on less aggressive optimization flags. Same as <strong>-O</strong> <strong>-hr</strong> <strong>-pto</strong> <strong>-isf</strong> 8 <strong>-tlo</strong> <strong>-kr</strong> <strong>-see</strong> 0.</p>
</dd>
<dt><strong><a name="o3" class="item"><strong>-O3</strong></a></strong></dt>

<dd>
<p>Switch on aggressive optimization flags. Same as <strong>-O2</strong> <strong>-RD</strong> <strong>-isf</strong> 12 <strong>-si</strong> <strong>-lro</strong> <strong>-las</strong> <strong>-vro</strong> <strong>-btcar</strong> (for XCOFF files) <strong>-lu</strong> 9 <strong>-rt</strong> 0 <strong>-so</strong> <strong>-see</strong> 1 <strong>-oderat</strong>.</p>
</dd>
<dt><strong><a name="o4" class="item"><strong>-O4</strong></a></strong></dt>

<dd>
<p>Switch on aggressive optimization flags together with aggressive function inlining. Same as <strong>-O3</strong> <strong>-sidf</strong> 50 <strong>-ihf</strong> 20 <strong>-sdp</strong> 9 <strong>-shci</strong> 90 and <strong>-bldcg</strong> (for XCOFF files).</p>
</dd>
<dt><strong><a name="ocvp_opt_call_value_profiling" class="item"><strong>-ocvp</strong>, <strong>--opt-call-value-profiling</strong></a></strong></dt>

<dd>
<p>specialize function calls according to the values of their passed parameters.</p>
</dd>
<dt><strong><a name="omullx_mullx_optimization" class="item"><strong>-omullX</strong>, <strong>--mullX-optimization</strong></a></strong></dt>

<dd>
<p>Optimize mullX instructions by adding a run-time check on RA and RB and performing equivalent operations with lower penalty. The optimization requires the use of <strong>-imullX</strong> in the instrumentation phase.</p>
</dd>
<dt><strong><a name="oderat_derat_optimization" class="item"><strong>-oderat</strong>, <strong>--derat-optimization</strong></a></strong></dt>

<dd>
<p>Optimize load/store indexed instructions by adding a run-time check on RA and RB and performing equivalent operations with lower penalty. The optimization requires the use of <strong>-iderat</strong> in the instrumentation phase.</p>
</dd>
<dt><strong><a name="pbsi_path_based_selective_inline" class="item"><strong>-pbsi</strong>, <strong>--path-based-selective-inline</strong></a></strong></dt>

<dd>
<p>Perform selective inlining of dominant hot function calls based on the control flow paths leading to hot functions.</p>
</dd>
<dt><strong><a name="pc_preserve_csects" class="item"><strong>-pc</strong>, <strong>--preserve-csects</strong></a></strong></dt>

<dd>
<p>Preserve CSects' boundaries in reordered code.</p>
</dd>
<dt><strong><a name="pca_propagate_constant_area" class="item"><strong>-pca</strong>, <strong>--propagate-constant-area</strong></a></strong></dt>

<dd>
<p>Relocate the constant variables area to the top of the code section when possible.</p>
</dd>
<dt><strong><a name="pfb_preserve_first_bb" class="item"><strong>-pfb</strong>, <strong>--preserve-first-bb</strong></a></strong></dt>

<dd>
<p>Preserve original location of the entry point basic block in program.</p>
</dd>
<dt><strong><a name="pp_preserve_functions" class="item"><strong>-pp</strong>, <strong>--preserve-functions</strong></a></strong></dt>

<dd>
<p>Preserve functions' boundaries in reordered code.</p>
</dd>
<dt><strong><a name="no_pr_no_ptrgl_r11" class="item"><strong>-[no]pr</strong>, <strong>--[no]ptrgl-r11</strong></a></strong></dt>

<dd>
<p>Perform removal of R11 load instruction in _ptrgl csect.</p>
</dd>
<dt><strong><a name="pto_ptrgl_optimization" class="item"><strong>-pto</strong>, <strong>--ptrgl-optimization</strong></a></strong></dt>

<dd>
<p>Perform optimization of indirect call instructions via registers by replacing them with conditional direct jumps.</p>
</dd>
<dt><strong><a name="ptoht_heatness_threshold_ptrgl_optimization_heatness_threshold_heatness_threshold" class="item"><strong>-ptoht</strong> <em>heatness_threshold</em>, <strong>--ptrgl-optimization-heatness-threshold</strong> <em>heatness_threshold</em></a></strong></dt>

<dd>
<p>Set the frequency threshold for indirect calls that are to be optimized by <strong>-pto</strong> optimization. Allowed range between 0 and 1. Default is set to 0.8. (Applicable only with <strong>-pto</strong> flag).</p>
</dd>
<dt><strong><a name="ptosl_limit_size_ptrgl_optimization_size_limit_limit_size" class="item"><strong>-ptosl</strong> <em>limit_size</em>, <strong>--ptrgl-optimization-size-limit</strong> <em>limit_size</em></a></strong></dt>

<dd>
<p>Set the limit of the number of conditional statements generated by <strong>-pto</strong> optimization. Allowed values are between 1 and 100. Default value is set to 3. (Applicable only with the <strong>-pto</strong> flag).</p>
</dd>
<dt><strong><a name="rc_reorder_code" class="item"><strong>-RC</strong>, <strong>--reorder-code</strong></a></strong></dt>

<dd>
<p>Perform code reordering.</p>
</dd>
<dt><strong><a name="rcaf_aggressiveness_factor_reorder_code_aggressivenes_factor_aggressiveness_factor" class="item"><strong>-rcaf</strong> <em>aggressiveness_factor</em>, <strong>--reorder-code-aggressivenes-factor</strong> <em>aggressiveness_factor</em></a></strong></dt>

<dd>
<p>Set the aggressiveness of code reordering optimization. Allowed values are [0 | 1 | 2], where 0 preserves then original code order and 2 is the most aggressive. Default is set to 1. (Applicable only with the <strong>-RC</strong> flag).</p>
</dd>
<dt><strong><a name="rccrf_reversal_factor_reorder_code_condition_reversal_factor_reversal_factor" class="item"><strong>-rccrf</strong> <em>reversal_factor</em>, <strong>--reorder-code-condition-reversal-factor</strong> <em>reversal_factor</em></a></strong></dt>

<dd>
<p>Set the threshold fraction that determines when to enable condition reversal for each conditional branch during code reordering. Allowed input range is between 0.0 and 1.0 where 0.0 tries to preserve original condition direction and 1.0 ignores it. Default is set to 0.8 (Applicable only with the <strong>-RC</strong> flag).</p>
</dd>
<dt><strong><a name="rcctf_termination_factor_reorder_code_chain_termination_factor_termination_factor" class="item"><strong>-rcctf</strong> <em>termination_factor</em>, <strong>--reorder-code-chain-termination-factor</strong> <em>termination_factor</em></a></strong></dt>

<dd>
<p>Set the threshold fraction that determines when to terminate each chain of basic blocks during code reordering. Allowed input range is between 0.0 and 1.0 where 0.0 generates long chains and 1.0 creates single basic block chains. Default is set to 0.05. (Applicable only with the <strong>-RC</strong> flag).</p>
</dd>
<dt><strong><a name="rd_reorder_data" class="item"><strong>-RD</strong>, <strong>--reorder-data</strong></a></strong></dt>

<dd>
<p>Perform static data reordering.</p>
</dd>
<dt><strong><a name="ppcf_pp_cross_func" class="item"><strong>-ppcf</strong>, <strong>--pp-cross-func</strong></a></strong></dt>

<dd>
<p>Perform cross function path profiling.</p>
</dd>
<dt><strong><a name="ppme_pp_max_edges" class="item"><strong>-ppme</strong>, <strong>--pp-max-edges</strong></a></strong></dt>

<dd>
<p>Perform edges number limitation.</p>
</dd>
<dt><strong><a name="rmte_remove_multiple_toc_entries" class="item"><strong>-rmte</strong>, <strong>--remove-multiple-toc-entries</strong></a></strong></dt>

<dd>
<p>Remove multiple TOC entries pointing to the same location in the input program file.</p>
</dd>
<dt><strong><a name="rt_removal_factor_reduce_toc_removal_factor" class="item"><strong>-rt</strong> <em>removal_factor</em>, <strong>--reduce-toc</strong> <em>removal_factor</em></a></strong></dt>

<dd>
<p>Perform removal of TOC entries according to a removal factor between (0,1), where 0 removes non-accessed TOC entries only and 1 removes all possible TOC entries.</p>
</dd>
<dt><strong><a name="rtb_remove_traceback_tables" class="item"><strong>-rtb</strong>, <strong>--remove-traceback-tables</strong></a></strong></dt>

<dd>
<p>Remove traceback tables in reordered code.</p>
</dd>
<dt><strong><a name="rcs_remove_csect_symbols" class="item"><strong>-rcs</strong>, <strong>--remove-csect-symbols</strong></a></strong></dt>

<dd>
<p>Remove csect symbols.</p>
</dd>
<dt><strong><a name="sdp_aggressiveness_factor_stride_data_prefetch_aggressiveness_factor" class="item"><strong>-sdp</strong> <em>aggressiveness_factor</em>, <strong>--stride-data-prefetch</strong> <em>aggressiveness_factor</em></a></strong></dt>

<dd>
<p>Perform data prefetching within frequently executed loops based on stride analysis, according to an aggressiveness factor between (1,9), where 1 is the least aggressive.</p>
</dd>
<dt><strong><a name="sdpila_instructions_number_stride_data_prefetch_instruction_look_ahead_instructions_number" class="item"><strong>-sdpila</strong> <em>instructions_number</em>, <strong>--stride-data-prefetch-instruction-look-ahead</strong> <em>instructions_number</em></a></strong></dt>

<dd>
<p>Set the number of instructions for which data is prefetched into the cache ahead of time. Default value is platform dependant. (Applicable only with the <strong>-sdp</strong> flag).</p>
</dd>
<dt><strong><a name="sdpms_stride_min_size_stride_data_prefetch_min_size_stride_min_size" class="item"><strong>-sdpms</strong> <em>stride_min_size</em>, <strong>--stride-data-prefetch-min-size</strong> <em>stride_min_size</em></a></strong></dt>

<dd>
<p>Set the minimal stride size in bytes, for which data will be considered a candidate for prefetching. Default value is set to 128 bytes. (Applicable only with the <strong>-sdp</strong> flag).</p>
</dd>
<dt><strong><a name="ebp_evt_based_prefetch_event_based_prefetch_evt_based_prefetch" class="item"><strong>-ebp</strong> <em>evt_based_prefetch</em>, <strong>--event-based-prefetch</strong> <em>evt_based_prefetch</em></a></strong></dt>

<dd>
<p>Perform data prefetching based on the events file.</p>
</dd>
<dt><strong><a name="ebpla_instructions_number_event_based_prefetch_look_ahead_instructions_number" class="item"><strong>-ebpla</strong> <em>instructions_number</em>, <strong>--event-based-prefetch-look-ahead</strong> <em>instructions_number</em></a></strong></dt>

<dd>
<p>Set the number of instructions for which event based prefetch is performed. Default value is platform dependant. (Applicable only with the <strong>-ebp</strong> flag).</p>
</dd>
<dt><strong><a name="see_level" class="item"><strong>-see</strong> <em>level</em></a></strong></dt>

<dd>
<p>Use simplified prolog/epilog for functions that perform conditional early-exit. Use basic optimization with <em>level</em>=0 and maximal with <em>level</em>=1.</p>
</dd>
<dt><strong><a name="shci_pct_selective_hot_code_inline_pct" class="item"><strong>-shci</strong> <em>pct</em>, <strong>--selective-hot-code-inline</strong> <em>pct</em></a></strong></dt>

<dd>
<p>Perform selective inlining of functions in order to decrease the total number of execution counts, so that only functions with hotness above the given percentage are inlined.</p>
</dd>
<dt><strong><a name="si_selective_inline" class="item"><strong>-si</strong>, <strong>--selective-inline</strong></a></strong></dt>

<dd>
<p>Perform selective inlining of dominant hot function calls.</p>
</dd>
<dt><strong><a name="sidf_percentage_factor_selective_inline_dominant_factor_percentage_factor" class="item"><strong>-sidf</strong> <em>percentage_factor</em>, <strong>--selective-inline-dominant-factor</strong> <em>percentage_factor</em></a></strong></dt>

<dd>
<p>Set a dominant factor percentage for selective inline optimization. The allowed range is between 0 and 100. Default is set to 80. (Applicable only with the <strong>-si</strong> and <strong>-pbsi</strong> flags).</p>
</dd>
<dt><strong><a name="siht_frequency_factor_selective_inline_hotness_threshold_frequency_factor" class="item"><strong>-siht</strong> <em>frequency_factor</em>, <strong>--selective-inline-hotness-threshold</strong> <em>frequency_factor</em></a></strong></dt>

<dd>
<p>Set a hotness threshold factor percentage for selective inline optimization to inline all dominant function calls that have a frequency count greater than the given frequency percentage. Default is set to 100. (Applicable only with the <strong>-si</strong> <strong>-pbsi</strong> flags).</p>
</dd>
<dt><strong><a name="slbp_spinlock_branch_prediction" class="item"><strong>-slbp</strong>, <strong>--spinlock-branch-prediction</strong></a></strong></dt>

<dd>
<p>Perform branch prediction bit setting for conditional branches in spinlock code containing l*arx and st*cx instructions. (Applicable after <strong>-bp</strong> flag).</p>
</dd>
<dt><strong><a name="sldp_spinlock_data_prefetch" class="item"><strong>-sldp</strong>, <strong>--spinlock-data-prefetch</strong></a></strong></dt>

<dd>
<p>Perform data prefetching for memory access instructions preceding spinlock code containing l*arx and st*cx instructions.</p>
</dd>
<dt><strong><a name="sll_lib1_prof1_libn_profn_static_link_libraries_lib1_prof1_libn_profn" class="item"><strong>-sll</strong> <em>Lib1:Prof1,...,LibN:ProfN</em>, <strong>--static-link-libraries</strong> <em>Lib1:Prof1,...,LibN:ProfN</em></a></strong></dt>

<dd>
<p>Statically link hot code from specified dynamically linked libraries to the input program. The parameter consists of a comma-separated list of libraries and their profiles. IMPORTANT: Licensing rights of specified libraries should be observed when applying this copying optimization.</p>
</dd>
<dt><strong><a name="sllht_hotness_threshold_static_link_libraries_hotness_threshold_hotness_threshold" class="item"><strong>-sllht</strong> <em>hotness_threshold</em>, <strong>--static-link-libraries-hotness-threshold</strong> <em>hotness_threshold</em></a></strong></dt>

<dd>
<p>Set hotness threshold for the <strong>--static-link-libraries</strong> optimization. The allowed input range is between 0 (least aggressive) and 1, or <strong>-1</strong>, which does not require a profile and selects all code that might be called by the input program from the given libraries. Default is set at 0.5.</p>
</dd>
<dt><strong><a name="so_stack_optimization" class="item"><strong>-so</strong>, <strong>--stack-optimization</strong></a></strong></dt>

<dd>
<p>Reduce the stack frame size of functions that are called with a small number of arguments.</p>
</dd>
<dt><strong><a name="spc_shortcut_plt_calls" class="item"><strong>-spc</strong>, <strong>--shortcut-plt-calls</strong></a></strong></dt>

<dd>
<p>Shortcut PLT calls in shared libraries to local functions if they exist. Note: Resolving to external symbols is disabled for such calls.</p>
</dd>
<dt><strong><a name="stf_stack_flattening" class="item"><strong>-stf</strong>, <strong>--stack-flattening</strong></a></strong></dt>

<dd>
<p>Merge the stack frames of inlined functions with the frames of the calling functions.</p>
</dd>
<dt><strong><a name="tb_preserve_traceback_tables" class="item"><strong>-tb</strong>, <strong>--preserve-traceback-tables</strong></a></strong></dt>

<dd>
<p>Force the restructuring of traceback tables in reordered code. If <strong>-tb</strong> option is omitted, traceback tables are automatically included only for C++ applications that use the Try &amp; Catch mechanism.</p>
</dd>
<dt><strong><a name="tlo_tocload_optimization" class="item"><strong>-tlo</strong>, <strong>--tocload-optimization</strong></a></strong></dt>

<dd>
<p>Replace each load instruction that references the TOC with a corresponding add-immediate instruction via the TOC anchor register, where possible.</p>
</dd>
<dt><strong><a name="ucde_unreachable_code_data_elimination" class="item"><strong>-ucde</strong>, <strong>--unreachable-code-data-elimination</strong></a></strong></dt>

<dd>
<p>Remove unreachable code and non-accessed static data.</p>
</dd>
<dt><strong><a name="vro_volatile_registers_optimization" class="item"><strong>-vro</strong>, <strong>--volatile-registers-optimization</strong></a></strong></dt>

<dd>
<p>Eliminate stores and restores of non-volatile registers in frequently executed functions by using available volatile registers.</p>
</dd>
<dt><strong><a name="vrox_volatile_registers_extended_optimization" class="item"><strong>-vrox</strong>, <strong>--volatile-registers-extended-optimization</strong></a></strong></dt>

<dd>
<p>Eliminate stores and restores of non-volatile registers in frequently executed functions by using available volatile registers, the extended version supports FP registers and transparency.</p>
</dd>
<dt><strong><a name="dlo_layout_file_data_layout_optimization_layout_file" class="item"><strong>-dlo</strong> <em>layout-file</em>, <strong>--data-layout-optimization</strong> <em>layout-file</em></a></strong></dt>

<dd>
<p>.</p>
</dd>
<dt><strong><a name="output_options" class="item"><strong>Output Options:</strong></a></strong></dt>

<dt><strong><a name="cep_complement_edge_profile" class="item"><strong>-cep</strong>, <strong>--complement-edge-profile</strong></a></strong></dt>

<dd>
<p>Complements partial profile information given for the basic blocks' frequencies by adding missing basic block-to-basic block edge counts.</p>
</dd>
<dt><strong><a name="d_disassemble_text" class="item"><strong>-d</strong>, <strong>--disassemble-text</strong></a></strong></dt>

<dd>
<p>Print the disassembled text section of the output program into <em>output_file</em>.dis_text file.</p>
</dd>
<dt><strong><a name="dap_dump_ascii_profile" class="item"><strong>-dap</strong>, <strong>--dump-ascii-profile</strong></a></strong></dt>

<dd>
<p>Dump profile information in ASCII format into <em>program</em>.aprof (requires the <strong>-f</strong> flag).</p>
</dd>
<dt><strong><a name="db_disassemble_bss" class="item"><strong>-db</strong>, <strong>--disassemble-bss</strong></a></strong></dt>

<dd>
<p>Print the disassembled bss section of the output program into <em>output_file</em>.dis_bss file.</p>
</dd>
<dt><strong><a name="dd_disassemble_data" class="item"><strong>-dd</strong>, <strong>--disassemble-data</strong></a></strong></dt>

<dd>
<p>Print the disassembled data section of the output program into <em>output_file</em>.dis_data file.</p>
</dd>
<dt><strong><a name="diap_dump_initial_ascii_profile" class="item"><strong>-diap</strong>, <strong>--dump-initial-ascii-profile</strong></a></strong></dt>

<dd>
<p>Dump the given profile information in ASCII format into <em>program</em>.aprof.init (requires the <strong>-f</strong> flag).</p>
</dd>
<dt><strong><a name="dim_dump_instruction_mix" class="item"><strong>-dim</strong>, <strong>--dump-instruction-mix</strong></a></strong></dt>

<dd>
<p>Dump instruction mix statistics based on gathered profile information.</p>
</dd>
<dt><strong><a name="dm_dump_mapper" class="item"><strong>-dm</strong>, <strong>--dump-mapper</strong></a></strong></dt>

<dd>
<p>Print a map of basic blocks and static variables with their respective new -&gt; old addresses into a <em>program</em>.mapper file.</p>
</dd>
<dt><strong><a name="o_output_file_output_file_output_file" class="item"><strong>-o</strong> <em>output_file</em>, <strong>--output-file</strong> <em>output_file</em></a></strong></dt>

<dd>
<p>Set the name of the output file. The default instrumented file is <em>program</em>.instr. The default optimized file is <em>program</em>.fdpr.</p>
</dd>
<dt><strong><a name="pif_print_inlined_funcs" class="item"><strong>-pif</strong>, <strong>--print-inlined-funcs</strong></a></strong></dt>

<dd>
<p>Print the list of inlined functions along with their corresponding calling functions into a <em>output_file</em>.inl_list file (requires the <strong>-si</strong> or <strong>-i</strong> or <strong>-isf</strong> flags).</p>
</dd>
<dt><strong><a name="pds_preserve_debug_symbols" class="item"><strong>-pds</strong>, <strong>--preserve-debug-symbols</strong></a></strong></dt>

<dd>
<p>Preserve debug symbols.</p>
</dd>
<dt><strong><a name="plc_preserve_linkage_conventions" class="item"><strong>-plc</strong>, <strong>--preserve-linkage-conventions</strong></a></strong></dt>

<dd>
<p>Preserve linkage conventions.</p>
</dd>
<dt><strong><a name="ppcf_print_prof_counts_file" class="item"><strong>-ppcf</strong>, <strong>--print-prof-counts-file</strong></a></strong></dt>

<dd>
<p>Print a text format of the profiling counters into a <em>program</em>.counts file (requires the <strong>-f</strong> flag).</p>
</dd>
<dt><strong><a name="sf_strip_file" class="item"><strong>-sf</strong>, <strong>--strip-file</strong></a></strong></dt>

<dd>
<p>Strip the output file.</p>
</dd>
<dt><strong><a name="simo_single_input_multiple_outputs" class="item"><strong>-simo</strong>, <strong>--single-input-multiple-outputs</strong></a></strong></dt>

<dd>
<p>Optimize in parallel into multiple outputs as specified by option sets read from stdin.</p>
</dd>
<dt><strong><a name="general_options" class="item"><strong>General Options:</strong></a></strong></dt>

<dt><strong><a name="h_help2" class="item"><strong>-h</strong>, <strong>--help</strong></a></strong></dt>

<dd>
<p>Print the online help.</p>
</dd>
<dt><strong><a name="j_jour_file_journal_jour_file" class="item"><strong>-j</strong> <em>jour_file</em>, <strong>--journal</strong> <em>jour_file</em></a></strong></dt>

<dd>
<p>Output optimization journal information to <em>jour_file</em>.</p>
</dd>
<dt><strong><a name="m_machine_model_machine_machine_model" class="item"><strong>-m</strong> <em>machine-model</em>, <strong>--machine</strong> <em>machine-model</em></a></strong></dt>

<dd>
<p>Generate code for the specified machine model. Target machine can be one of the following models: power2, power3, ppc405, ppc440, power4, ppc970, power5, power6, power7, ppe, spe, spe_edp, z10, z9. Default is power7.</p>
</dd>
<dt><strong><a name="q_quiet" class="item"><strong>-q</strong>, <strong>--quiet</strong></a></strong></dt>

<dd>
<p>Set the output mode to quiet, suppressing informational messages.</p>
</dd>
<dt><strong><a name="st_stat_file_statistics_stat_file" class="item"><strong>-st</strong> <em>stat_file</em>, <strong>--statistics</strong> <em>stat_file</em></a></strong></dt>

<dd>
<p>Output statistics information to <em>stat_file</em>. If <em>stat_file</em> is '-', the output goes to the standard output. See <strong>--verbose</strong> for the default.</p>
</dd>
<dt><strong><a name="v_level_verbose_level" class="item"><strong>-v</strong> <em>level</em>, <strong>--verbose</strong> <em>level</em></a></strong></dt>

<dd>
<p>Set verbose output mode level. When set, various statistics about the output program are printed into the file <em>program</em>.stat. Allowed level range is between 0 and 3. Default is set to 0.</p>
</dd>
<dt><strong><a name="v_version2" class="item"><strong>-V</strong>, <strong>--version</strong></a></strong></dt>

<dd>
<p>Print the version number.</p>
</dd>
<dt><strong><a name="w_level_warning_level_level" class="item"><strong>-w</strong> <em>level</em>, <strong>--warning-level</strong> <em>level</em></a></strong></dt>

<dd>
<p>Set the warning level so only errors of this level and below will be printed. The levels are: 1: errors, 2: warnings, 3: debug warning, 4: debug information. Default is 2.</p>
</dd>
</dl>
<p>
</p>
<hr />
<h1><a name="default_values_of_options">Default values of options</a></h1>
<p>As shown in the previous section, determining the default value of options is done using the statistics file.
The options specified under 'options. ...' are the the user-specified option, plus the ones enabled by them.
So, in the above example, specifying <strong>-O3</strong> entailed among others, the setup of <strong>-hco</strong> option (Hot-Cold Optimization),
and the setup of <strong>-hrf</strong> option (HCO Rescheduling Factor) with the value of 0.1.</p>
<p>
</p>
<hr />
<h1><a name="ascii_profile">ASCII profile</a></h1>
<p>By default the profile generated by <strong>fdprpro</strong> is in some internal
binary format.  To allow external tools to generate the profile, an
ASCII profile is also supported (see <strong>--ascii-profile-file</strong>).</p>
<p>The format of the ASCII profile file is:</p>
<pre>
 &lt;Simple&gt; address execCount &lt;/Simple&gt;
 &lt;Cond&gt; address execCount fallthruCount &lt;/Cond&gt;
 &lt;Reg&gt; address execCount fallthruCount regIndex 
 type1 value1 execCount1
 type2 value2 execCount2
 ...
 typeN valueN execCountN 
 &lt;/Reg&gt;</pre>
<p>The profile file is set of the Profile entries - Simple, Cond and Reg.
The types in &lt;Reg&gt; entries are Abs - for Absolute Values, Text - for Text addresses, 
Data - for Data addresses. There are no other &quot;tags&quot; defined, there must not be white spaces between the 
tags` letters, no comments. Addresses and Values can be in decimal or in hex form 
(starting with 0x).</p>
<p>For example -</p>
<pre>
 &lt;Simple&gt; 0x100000240 10 &lt;/Simple&gt;
 &lt;Simple&gt; 0x100000250 20 &lt;/Simple&gt;
 &lt;Cond&gt; 0x100000260 20  10 &lt;/Cond&gt;
 &lt;Simple&gt; 0x100000270 20 &lt;/Simple&gt;
 &lt;Reg&gt;  0x100000260 20  10 17
 Abs 23 5
 Text  0x100000300 5 
 Data  0x200000400 10
 &lt;/Reg&gt;</pre>
<p>The order of the profile entries is not important, although for better
readability they should be sorted according to address.  The
ASCII profile file (extension .aprof) should contains entries for code executed at least
once. The code with execCount = 0 should not be included (it is not
forbidden but will not provide any information to fdpr).  Generally it
is sufficient to provide one profile entry for each executed basic block.
The address of that profile entry should be any address within the
basic block.  Since <strong>fdprpro</strong>'s internal basic block partitioning is not
always known, several profile entries may be provided for a single
basic block up to the maximum of one profile entry for each
instruction.  When several profile entries are provided for a single
basic block and they contain conflicting information (e.g., different
execCount), <strong>fdprpro</strong> will produce a warning starting with &quot;Conflicting
profiling&quot; ... and ignore the later conflicting information.</p>
<p>
</p>
<hr />
<h1><a name="human_readable_output">Human-readable output</a></h1>
<p>In addition to the optimized or instrumented program, <strong>fdprpro</strong> produces human readable output.</p>
<p>1. Standard output. The text that goes to standard output includes the sign-on message, progress information and sign-off message.
The progress information displays the passage of <strong>fdprpro</strong> along the different phases of processing, as follows:</p>
<pre>
        fdprpro (FDPR) &lt;version&gt; Linux/POWER
        fdprpro -a opt -O3 li.linux.gcc32.base
        &gt; reading_exe ...
        &gt; adjusting_exe ...
        &gt; analyzing ...
        &gt; building_program_infrastructure ...
  ...
        &gt; updating_executable ...
        &gt; writing_executable ...
        bye.</pre>
<p>If the <strong>--quiet</strong> option is specified, no output is produced here.</p>
<p>2. Standard error. As usual, warnings and errors messages are written to the standard error file. Note that <strong>fdprpro</strong> exists after the
first error.</p>
<p>3. Statistics file. If the <strong>--verbose &lt;level</strong>&gt; option is selected, various kinds of statistics about the program will
be written to the statistics file, <em>output_file</em>.stat. The file consists of a list of tables, typically
in a form of &lt;attribute&gt; &lt;value&gt; per line. The amount of information is determined by <em>level</em>. The following
is an example, corresponding to the above invocation:</p>
<pre>
        options. group               active_options
        options. optimization        -bf -bp -dp -hr -hrf 0.10 -kr -las -lro -lu 9 -isf 12 -nop -pr -RC -RD -rt 0.00 -si -tlo -vro
        options. output              -o 1.base</pre>
<pre>
        global.use_try_and_catch:              0
        global.profile_info:            not_available</pre>
<pre>
        file.input:                     li.linux.gcc32.base
        file.output:                    1.base
        file.statistics:                1.base.stat</pre>
<pre>
        analysis.csects:                     347
        analysis.functions:                  343
        analysis.constants:                   13
        analysis.basic_blocks:              5360
        analysis.function_descriptors:         0
        analysis.branch_tables:               10
        analysis.branch_table_entries:       374
        analysis.unknown_basic_units:         17
        analysis.traceback_tables:             0
  ...</pre>
<p>Note, the options specified in the optimization group are the actual ones enabled by the <strong>-O3</strong> option. See below.</p>
<p>
</p>
<hr />
<h1><a name="importing_code_from_shared_libraries">Importing code from shared libraries</a></h1>
<p>Typically <strong>fdprpro</strong> optimizes a single target module (an executable file or a shared
library), without considering the cross-module flow of the program. The
<strong>--static-link-libaries</strong> option allows <strong>fdprpro</strong> to go beyond the boundary of
the target module and import hot code (i.e., heavily used) from other modules to which it is
dynamically linked. These modules are referred below as <em>SLL libraries</em>.</p>
<p>For example, to import hot code from <code>mylib.so</code> using its profile <code>mylib.so.prof</code>, to
<code>myprog</code>, use the following command:</p>
<pre>
 $ fdprpro -sll mylib.so:mylib.so.prof -O3 -o myprog.fdpr -f myprog.prof myprog</pre>
<p>For better performance results, it is highly recommended that users collect the profiles of the specified SLL libraries with
the same workload as the one used for training the target program.</p>
<p><strong>IMPORTANT</strong>: If an SLL library is later upgraded, the optimization must be rerun with the upgraded library to keep the
correspondence valid between that library and the target module.</p>
<p><strong>IMPORTANT</strong>: It is the responsibility of the user to ensure that code copying
from SLL libraries is compliant with the usage license of these libraries.</p>
<p>
</p>
<hr />
<h1><a name="limited_value_profiling__lvp_">Limited-Value Profiling (LVP)</a></h1>
<p>Starting with release 5.4.0.18 <strong>fdprpro</strong> provides special optimizations that
look for operations with specific values and replace them with an optimized
sequence. Such optimizations, which are typically target-specific, require 
corresponding instrumentation that will profile the code to identify potential 
sequences. The first optimization that use LVP is the
<strong>-omullX</strong> optimization. The optimization performs strength-reduction on
selected instances of integer multiplications. The user needs to specify -imullX
for instrumentation and <strong>-omullX</strong> for optimization. To tune the optimization
for Power6, specify also <strong>-m power6</strong>.</p>
<p>
</p>
<hr />
<h1><a name="conservative_vs__aggressive_data_reordering">Conservative vs. aggressive data reordering</a></h1>
<p>The data reordering algorithm of <strong>fdprpro</strong> is enabled by the <strong>-RD</strong> option and is 
available only for ELF64 (64-bit) programs. The algorithm reorders data elements 
in order to achieve better data cache efficiency as well
as more effective instruction selection. It may operate on all data elements or only on subset of them
depending on the selected aggressiveness. By default, a conservative
algorithm is selected which does not reorder user's static data (i.e., data
defined in .bss and .data sections). This is needed to protect against data
access optimizations used in GCC4.3 and later. A more aggressive optimization is
possible with the option <strong>--analyze-static-data</strong> (<strong>-asd</strong>) which considers all
data elements.</p>
<p>
</p>
<hr />
<h1><a name="runtime_instrumentation_stack">Runtime instrumentation stack</a></h1>
<p><strong>fdprpro</strong> inserts certain code stubs during instrumentation which perform the
necessary counting. To keep program's state intact, the registers changed by
these stubs are save at the beginning of the stub and restored at the end. Writing below the stack
can cause segment violations in rare cases. This was found to occur in
applications that use the <code>alloca()</code> function or that employ
multi-threading. To overcome this segment violation use the 
<strong>--instrumentation-safe-stack-usage</strong> (<strong>-issu</strong>). The option adds code that prevents 
the signal at the cost of increased code size (up to 20%). The user can also set the offset of 
the save area from the stack pointer, which must be negative, using the 
<strong>--instrumentation-stack-offset</strong> (<strong>-iso</strong>).</p>
<p>
</p>
<hr />
<h1><a name="alignment_strategies">Alignment strategies</a></h1>
<p>The alignment flag <strong>-A</strong> (<strong>--align-code</strong>) indicates the alignment strategy to use.
The strategy codes are:</p>
<p>1 - An alignment strategy based on the instruction grouping of the selected target machine. See the <strong>-m</strong> (<strong>--machine</strong>) option for the possible machine models and the default value of this option.</p>
<p>2 - An alignment stragegy based on instruction grouping as in (1) above, while considering also the hotness of the branch targets. This typically makes prefetching the target instruction stream more efficient.</p>
<p>
</p>
<hr />
<h1><a name="warnings_and_errors_during_profiling">Warnings and errors during profiling</a></h1>
<p>In exceptional conditions during profiling (training) the instrumentation code produces 
warnings and error messages. The instrumentation messages are written to a special file name
<em>profile file</em>.errors_<em>pid</em>_<em>tid</em> to avoid having these messages interleaved with the regular text produced
by the user's program. The directory where both the profile file and profile error file
reside can be specified explicitly As with the profile file itself, the user may need to set the
absolute path of directory where the profile error file resides can be specified with the environment 
variable <strong>FDPR_PROF_DIR</strong> (see <strong>Instrumentation and Profiling</strong> section above). If the directory where the program runs 
changes make sure <strong>FDPR_PROF_DIR</strong> is defined with the full path name.</p>
<p>
</p>
<hr />
<h1><a name="files">Files</a></h1>
<dl>
<dt><strong><a name="installed_dir_" class="item"><em>installed_dir</em>/bin/fdpr</a></strong></dt>

<dd>
<p>The wrapper script for <strong>fdprpro</strong> (by default <em>installed_dir</em> is <strong>/opt/ibm/fdprpro</strong>).</p>
</dd>
<dt><strong><em>installed_dir</em>/bin/fdprpro</strong></dt>

<dd>
<p>The actual executable (binary) program.</p>
</dd>
<dt><strong><a name="installed_dir_lib_libfdprinst32_so" class="item"><em>installed_dir</em>/lib/libfdprinst32.so</a></strong></dt>

<dd>
<p>The shared library used during profiling for ELF32 executable files.</p>
</dd>
<dt><strong><a name="installed_dir_lib_libfdprinst64_so" class="item"><em>installed_dir</em>/lib/libfdprinst64.so</a></strong></dt>

<dd>
<p>The shared library used during profiling for ELF64 executable files.</p>
</dd>
<dt><strong><a name="output_file_dis_text" class="item"><em>output_file</em>.dis_text</a></strong></dt>

<dd>
<p>The disassembly file of program text, produced by the <strong>--disassemble-text</strong> option.</p>
</dd>
<dt><strong><a name="output_file_dis_data" class="item"><em>output_file</em>.dis_data</a></strong></dt>

<dd>
<p>The disassembly file of program data, produced by the <strong>--disassemble-data</strong> option.</p>
</dd>
<dt><strong><a name="output_file_dis_bss" class="item"><em>output_file</em>.dis_bss</a></strong></dt>

<dd>
<p>The disassembly file of program data, produced by the <strong>--disassemble-bss</strong>
option.</p>
</dd>
<dt><strong><a name="output_file_mapper" class="item"><em>output_file</em>.mapper</a></strong></dt>

<dd>
<p>The map of basic block and static variables. See the <strong>--dump-mapper</strong> option.</p>
</dd>
<dt><strong><a name="output_file_aprof_init" class="item"><em>output_file</em>.aprof_init</a></strong></dt>

<dd>
<p>The initial profile information in ASCII format. See the
<strong>--dump-initial-ascii-profile</strong> option.</p>
</dd>
<dt><strong><a name="output_file_aprof" class="item"><em>output_file</em>.aprof</a></strong></dt>

<dd>
<p>The ASCII-formatted profile file. See the <strong>--dump-ascii-profile</strong> option.</p>
</dd>
<dt><strong><a name="output_file_autoerr_log" class="item"><em>output_file</em>.autoerr_log</a></strong></dt>

<dd>
<p>In case of error, the file contains information related to the
error. Please send it with the bug report to <a href="mailto:fdpr@il.ibm.com.">fdpr@il.ibm.com.</a></p>
</dd>
<dt><strong><a name="output_file_stat" class="item"><em>output_file</em>.stat</a></strong></dt>

<dd>
<p>If <strong>--verbose &lt;level</strong>&gt; is specified the file will contain certain statistics
about the target program or about the optimization process.</p>
</dd>
</dl>

</body>

</html>
